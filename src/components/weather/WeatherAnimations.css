/**
 * Weather Animations CSS - Modernized
 *
 * Provides animated weather effects for the WeatherCard component.
 * Optimized with CSS transforms, custom properties, and GPU acceleration.
 * Note: Rain, snow, lightning, and wind now use dedicated React components.
 */

/* CSS Custom Properties for easy customization */
:root {
  --sun-color: #ffdc63;
  --moon-color: #e0e0e0;
  --cloud-color-day: #f5f5f5;
  --cloud-color-night: rgba(245, 245, 245, 0.6);
  --star-color: white;
}

/* Base animation container */
.animation-elements {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  pointer-events: none;
  z-index: 0;
  contain: layout style paint;
}

/* ============================================
   CLEAR DAY (SUNNY)
   ============================================ */
.weather-clear-day .animation-elements::before {
  content: '';
  position: absolute;
  top: 25px;
  right: 25px;
  width: 60px;
  height: 60px;
  background: radial-gradient(circle, var(--sun-color) 0%, rgba(255, 220, 99, 0.8) 70%, transparent 100%);
  border-radius: 50%;
  box-shadow:
    0 0 30px 10px rgba(255, 220, 99, 0.6),
    0 0 50px 20px rgba(255, 220, 99, 0.3);
  animation: sun-pulse 4s ease-in-out infinite;
  will-change: transform, opacity;
}

.weather-clear-day .animation-elements::after {
  content: '';
  position: absolute;
  top: 20px;
  right: 20px;
  width: 70px;
  height: 70px;
  background: transparent;
  border-radius: 50%;
  border: 3px solid transparent;
  border-top-color: rgba(255, 220, 99, 0.4);
  border-right-color: rgba(255, 220, 99, 0.3);
  border-bottom-color: rgba(255, 220, 99, 0.2);
  border-left-color: rgba(255, 220, 99, 0.3);
  animation: sun-rays-rotate 12s linear infinite;
  will-change: transform;
}

@keyframes sun-pulse {
  0%, 100% {
    transform: scale(1) translate3d(0, 0, 0);
    opacity: 1;
  }
  50% {
    transform: scale(1.08) translate3d(0, 0, 0);
    opacity: 0.95;
  }
}

@keyframes sun-rays-rotate {
  0% {
    transform: rotate(0deg) scale(1.15);
  }
  100% {
    transform: rotate(360deg) scale(1.15);
  }
}

/* ============================================
   CLEAR NIGHT
   ============================================ */
.weather-clear-night {
  background: linear-gradient(to bottom, #0f1d3d 0%, #1a237e 50%, #283593 100%) !important;
}

.weather-clear-night .animation-elements::before {
  content: '';
  position: absolute;
  top: 25px;
  right: 25px;
  width: 45px;
  height: 45px;
  background: radial-gradient(circle, var(--moon-color) 0%, rgba(224, 224, 224, 0.9) 60%, transparent 100%);
  border-radius: 50%;
  box-shadow:
    0 0 25px 8px rgba(255, 255, 255, 0.4),
    0 0 40px 15px rgba(255, 255, 255, 0.2),
    inset -10px -10px 15px rgba(180, 180, 180, 0.3); /* Crater shadow */
  animation: moon-glow 6s ease-in-out infinite alternate;
  will-change: transform, opacity;
}

.weather-clear-night .animation-elements::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image:
    radial-gradient(2px 2px at 15% 20%, var(--star-color), transparent),
    radial-gradient(1px 1px at 30% 60%, var(--star-color), transparent),
    radial-gradient(1.5px 1.5px at 45% 25%, var(--star-color), transparent),
    radial-gradient(1px 1px at 60% 50%, var(--star-color), transparent),
    radial-gradient(1px 1px at 75% 70%, var(--star-color), transparent),
    radial-gradient(1.5px 1.5px at 85% 30%, var(--star-color), transparent),
    radial-gradient(2px 2px at 90% 65%, var(--star-color), transparent),
    radial-gradient(1px 1px at 95% 85%, var(--star-color), transparent),
    radial-gradient(1.5px 1.5px at 20% 75%, var(--star-color), transparent),
    radial-gradient(1px 1px at 10% 45%, var(--star-color), transparent);
  background-repeat: repeat;
  background-size: 300px 300px;
  opacity: 0.8;
  animation: stars-twinkle 8s ease-in-out infinite;
  will-change: opacity;
}

@keyframes moon-glow {
  0% {
    box-shadow:
      0 0 25px 8px rgba(255, 255, 255, 0.4),
      0 0 40px 15px rgba(255, 255, 255, 0.2),
      inset -10px -10px 15px rgba(180, 180, 180, 0.3);
  }
  100% {
    box-shadow:
      0 0 30px 12px rgba(255, 255, 255, 0.5),
      0 0 50px 20px rgba(255, 255, 255, 0.25),
      inset -10px -10px 15px rgba(180, 180, 180, 0.3);
  }
}

@keyframes stars-twinkle {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 0.95; }
}

/* ============================================
   PARTLY CLOUDY DAY
   ============================================ */
.weather-partly-cloudy-day .animation-elements::before,
.weather-few-clouds-day .animation-elements::before {
  content: '';
  position: absolute;
  top: 20px;
  right: 20px;
  width: 50px;
  height: 50px;
  background: radial-gradient(circle, var(--sun-color) 0%, rgba(255, 220, 99, 0.8) 70%, transparent 100%);
  border-radius: 50%;
  box-shadow: 0 0 25px 8px rgba(255, 220, 99, 0.5);
  animation: sun-pulse 4s ease-in-out infinite;
  will-change: transform;
  z-index: 1;
}

.weather-partly-cloudy-day .animation-elements::after,
.weather-few-clouds-day .animation-elements::after {
  content: '';
  position: absolute;
  top: 35px;
  right: 30px;
  width: 65px;
  height: 32px;
  background: var(--cloud-color-day);
  border-radius: 50px;
  box-shadow:
    20px 8px 0 -5px var(--cloud-color-day),
    -15px 5px 0 -3px var(--cloud-color-day),
    0 0 20px 5px rgba(255, 255, 255, 0.4);
  animation: cloud-float 12s ease-in-out infinite;
  will-change: transform;
}

/* ============================================
   PARTLY CLOUDY NIGHT
   ============================================ */
.weather-partly-cloudy-night,
.weather-few-clouds-night {
  background: linear-gradient(to bottom, #0f1d3d 0%, #1a237e 50%, #283593 100%) !important;
}

.weather-partly-cloudy-night .animation-elements::before,
.weather-few-clouds-night .animation-elements::before {
  content: '';
  position: absolute;
  top: 20px;
  right: 20px;
  width: 40px;
  height: 40px;
  background: radial-gradient(circle, var(--moon-color) 0%, rgba(224, 224, 224, 0.9) 60%, transparent 100%);
  border-radius: 50%;
  box-shadow:
    0 0 20px 6px rgba(255, 255, 255, 0.3),
    inset -8px -8px 12px rgba(180, 180, 180, 0.3);
  animation: moon-glow 6s ease-in-out infinite alternate;
  will-change: transform;
  z-index: 1;
}

.weather-partly-cloudy-night .animation-elements::after,
.weather-few-clouds-night .animation-elements::after {
  content: '';
  position: absolute;
  top: 40px;
  right: 25px;
  width: 55px;
  height: 28px;
  background: var(--cloud-color-night);
  border-radius: 45px;
  box-shadow:
    18px 6px 0 -4px var(--cloud-color-night),
    -12px 4px 0 -2px var(--cloud-color-night),
    0 0 15px 3px rgba(255, 255, 255, 0.2);
  animation: cloud-float 12s ease-in-out infinite;
  will-change: transform;
}

/* ============================================
   CLOUDY / OVERCAST
   ============================================ */
.weather-cloudy,
.weather-scattered-clouds-day,
.weather-scattered-clouds-night {
  background: linear-gradient(to bottom, rgba(138, 164, 189, 0.5), rgba(138, 164, 189, 0.2));
}

.weather-cloudy .animation-elements::before,
.weather-cloudy .animation-elements::after,
.weather-cloudy .animation-elements .cloud-extra,
.weather-cloudy .animation-elements .cloud-extra-2 {
  content: '';
  position: absolute;
  background: var(--cloud-color-day);
  border-radius: 50px;
  animation: cloud-float ease-in-out infinite;
  will-change: transform;
}

.weather-cloudy .animation-elements::before {
  top: 20px;
  right: 25%;
  width: 75px;
  height: 35px;
  box-shadow:
    25px 10px 0 -6px var(--cloud-color-day),
    -18px 7px 0 -4px var(--cloud-color-day),
    0 0 20px 6px rgba(255, 255, 255, 0.5);
  animation-duration: 14s;
  animation-delay: 0s;
}

.weather-cloudy .animation-elements::after {
  top: 50px;
  left: 20%;
  width: 65px;
  height: 30px;
  box-shadow:
    20px 8px 0 -5px var(--cloud-color-day),
    -15px 6px 0 -3px var(--cloud-color-day),
    0 0 18px 5px rgba(255, 255, 255, 0.4);
  animation-duration: 16s;
  animation-delay: 3s;
}

.weather-cloudy .animation-elements .cloud-extra {
  top: 75px;
  right: 35%;
  width: 55px;
  height: 26px;
  box-shadow:
    18px 7px 0 -4px var(--cloud-color-day),
    -12px 5px 0 -2px var(--cloud-color-day),
    0 0 15px 4px rgba(255, 255, 255, 0.3);
  animation-duration: 18s;
  animation-delay: 6s;
}

.weather-cloudy .animation-elements .cloud-extra-2 {
  top: 100px;
  left: 30%;
  width: 60px;
  height: 28px;
  box-shadow:
    20px 8px 0 -5px var(--cloud-color-day),
    -14px 6px 0 -3px var(--cloud-color-day),
    0 0 16px 4px rgba(255, 255, 255, 0.35);
  animation-duration: 15s;
  animation-delay: 9s;
}

@keyframes cloud-float {
  0%, 100% {
    transform: translate3d(0, 0, 0);
  }
  50% {
    transform: translate3d(20px, 5px, 0);
  }
}

/* ============================================
   FOG / MIST
   ============================================ */
.weather-fog,
.weather-fog-windy {
  background: linear-gradient(to bottom, #5a6b7a 0%, #6a7b8a 50%, #7a8b9a 100%) !important;
}

.weather-fog .animation-elements::before,
.weather-fog .animation-elements::after,
.weather-fog .animation-elements .fog-layer,
.weather-fog-windy .animation-elements::before,
.weather-fog-windy .animation-elements::after,
.weather-fog-windy .animation-elements .fog-layer {
  content: '';
  position: absolute;
  width: 110%;
  left: -5%;
  height: 40px;
  background: linear-gradient(
    to right,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.7) 20%,
    rgba(255, 255, 255, 0.9) 50%,
    rgba(255, 255, 255, 0.7) 80%,
    rgba(255, 255, 255, 0) 100%
  );
  border-radius: 50%;
  filter: blur(15px);
  animation: fog-drift ease-in-out infinite alternate;
  will-change: transform;
  box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
}

.weather-fog .animation-elements::before,
.weather-fog-windy .animation-elements::before {
  top: 30px;
  animation-duration: 10s;
  animation-delay: 0s;
}

.weather-fog .animation-elements::after,
.weather-fog-windy .animation-elements::after {
  top: 65px;
  animation-duration: 12s;
  animation-delay: 2s;
}

.weather-fog .animation-elements .fog-layer,
.weather-fog-windy .animation-elements .fog-layer {
  top: 100px;
  animation-duration: 11s;
  animation-delay: 4s;
}

/* Windy fog moves faster and further */
.weather-fog-windy .animation-elements::before,
.weather-fog-windy .animation-elements::after,
.weather-fog-windy .animation-elements .fog-layer {
  animation-name: fog-drift-windy;
  animation-duration: 6s;
}

@keyframes fog-drift {
  0% { transform: translate3d(-60px, 0, 0); }
  100% { transform: translate3d(60px, 0, 0); }
}

@keyframes fog-drift-windy {
  0% { transform: translate3d(-100px, -8px, 0) scaleX(0.9); }
  100% { transform: translate3d(120px, 8px, 0) scaleX(1.1); }
}

/* ============================================
   THUNDERSTORM BACKGROUNDS
   ============================================ */
.weather-thunderstorm,
.weather-thunderstorm-heavy,
.weather-thunderstorm-day,
.weather-thunderstorm-night {
  background: linear-gradient(to bottom, #2c3e50 0%, #34495e 50%, #455a64 100%) !important;
}

/* Lightning bolt component will handle the actual lightning effects */

/* ============================================
   RAIN / DRIZZLE BACKGROUNDS
   ============================================ */
.weather-rain,
.weather-rain-day,
.weather-rain-night,
.weather-rain-heavy,
.weather-heavy-rain-day,
.weather-heavy-rain-night,
.weather-drizzle,
.weather-drizzle-day,
.weather-drizzle-night,
.weather-drizzle-windy,
.weather-windy-drizzle,
.weather-windy-rain {
  /* Rain particle component will handle the rain visuals */
  /* Just provide appropriate background */
}

.weather-rain,
.weather-rain-day,
.weather-rain-heavy,
.weather-heavy-rain-day,
.weather-windy-rain {
  background: linear-gradient(to bottom, #6a7a8a 0%, #7a8a9a 50%, #8a9aaa 100%) !important;
}

.weather-rain-night,
.weather-rain-night-heavy,
.weather-heavy-rain-night {
  background: linear-gradient(to bottom, #1a237e, #283593) !important;
}

.weather-drizzle,
.weather-drizzle-day,
.weather-drizzle-windy,
.weather-windy-drizzle {
  background: linear-gradient(to bottom, #7a8a9a 0%, #8a9aaa 50%, #9aabb8 100%) !important;
}

.weather-drizzle-night {
  background: linear-gradient(to bottom, #1a237e, #283593) !important;
}

/* ============================================
   SNOW BACKGROUNDS
   ============================================ */
.weather-snow,
.weather-snow-day,
.weather-snow-night,
.weather-snow-heavy,
.weather-heavy-snow,
.weather-snow-windy,
.weather-windy-snow {
  /* Snow particle component will handle the snow visuals - dark blue background for white snow */
  background: linear-gradient(to bottom, #4a6b8a 0%, #5a7ba3 50%, #6a8bb5 100%) !important;
}

/* ============================================
   WINDY / DUST
   ============================================ */
.weather-windy,
.weather-windy-dust,
.weather-dust {
  /* Wind streaks component will handle the wind visuals - darker background for contrast */
  background: linear-gradient(to bottom, #607d8b 0%, #78909c 50%, #90a4ae 100%) !important;
}

.weather-windy-dust .animation-elements {
  background: linear-gradient(to bottom, rgba(189, 189, 189, 0.4), rgba(189, 189, 189, 0.2));
}

/* ============================================
   TORNADO / EXTREME WEATHER
   ============================================ */
.weather-tornado,
.weather-extreme {
  background: linear-gradient(to bottom, #263238 0%, #37474f 50%, #455a64 100%) !important;
}

.weather-tornado .animation-elements::before {
  content: '';
  position: absolute;
  top: 30px;
  left: 50%;
  transform: translateX(-50%);
  width: 35px;
  height: 130px;
  background: linear-gradient(to bottom,
    rgba(80, 80, 80, 0.95) 0%,
    rgba(110, 110, 110, 0.9) 30%,
    rgba(140, 140, 140, 0.85) 60%,
    rgba(160, 160, 160, 0.8) 100%);
  border-radius: 50% 50% 30% 30% / 30% 30% 20% 20%;
  filter: blur(3px) drop-shadow(0 0 15px rgba(0, 0, 0, 0.8));
  animation: tornado-spin 1.5s ease-in-out infinite;
  will-change: transform;
  /* Add swirling debris effect */
  box-shadow:
    inset -5px 0 10px rgba(0, 0, 0, 0.5),
    inset 5px 0 10px rgba(255, 255, 255, 0.2);
}

.weather-tornado .animation-elements::after {
  content: '';
  position: absolute;
  top: 15px;
  left: 50%;
  transform: translateX(-50%);
  width: 110px;
  height: 45px;
  background: linear-gradient(to bottom, #444 0%, #555 50%, #666 100%);
  border-radius: 50%;
  box-shadow:
    0 0 30px 10px rgba(100, 100, 100, 0.8),
    0 15px 40px rgba(0, 0, 0, 0.6),
    inset 0 -10px 20px rgba(0, 0, 0, 0.4);
  animation: tornado-cloud 2.5s ease-in-out infinite;
  will-change: transform;
}

@keyframes tornado-spin {
  0%, 100% {
    transform: translateX(-50%) rotate(4deg) scaleY(0.92) scaleX(1);
  }
  25% {
    transform: translateX(-50%) rotate(-2deg) scaleY(1.03) scaleX(0.95);
  }
  50% {
    transform: translateX(-50%) rotate(-4deg) scaleY(1.08) scaleX(1.05);
  }
  75% {
    transform: translateX(-50%) rotate(2deg) scaleY(1.03) scaleX(0.95);
  }
}

@keyframes tornado-cloud {
  0%, 100% {
    transform: translateX(-50%) scaleX(1) rotate(0deg);
  }
  33% {
    transform: translateX(-50%) scaleX(1.15) rotate(2deg);
  }
  66% {
    transform: translateX(-50%) scaleX(1.1) rotate(-2deg);
  }
}

/* ============================================
   DEFAULT / FALLBACK
   ============================================ */
.weather-default,
.weather-default-day {
  background: linear-gradient(to bottom, #2196f3 0%, #42a5f5 50%, #64b5f6 100%) !important;
}

.weather-default-night {
  background: linear-gradient(to bottom, #0f1d3d 0%, #1a237e 50%, #283593 100%) !important;
}

/* ============================================
   TEXT SHADOW FOR READABILITY
   ============================================ */
.shadow-text {
  text-shadow:
    0 2px 4px rgba(0, 0, 0, 0.8),
    0 3px 6px rgba(0, 0, 0, 0.6),
    0 4px 8px rgba(0, 0, 0, 0.4);
}

.shadow-text h2,
.shadow-text h3,
.shadow-text .text-lg,
.shadow-text .text-xl,
.shadow-text .text-2xl,
.shadow-text .text-3xl,
.shadow-text .font-bold {
  text-shadow:
    0 2px 5px rgba(0, 0, 0, 1),
    0 3px 8px rgba(0, 0, 0, 0.9),
    0 4px 10px rgba(0, 0, 0, 0.7);
}

/* Extra contrast for bright backgrounds */
.weather-clear-day .shadow-text,
.weather-few-clouds-day .shadow-text,
.weather-partly-cloudy-day .shadow-text,
.weather-scattered-clouds-day .shadow-text {
  text-shadow:
    0 1px 3px rgba(0, 0, 0, 1),
    0 2px 6px rgba(0, 0, 0, 0.95),
    0 3px 9px rgba(0, 0, 0, 0.8),
    0 4px 12px rgba(0, 0, 0, 0.7);
}

/* ============================================
   DOM ELEMENTS (used in JSX)
   ============================================ */
.animation-elements .cloud-extra,
.animation-elements .cloud-extra-2,
.animation-elements .fog-layer,
.animation-elements .wind-line,
.animation-elements .wind-line-2,
.animation-elements .lightning-extra {
  position: absolute;
}

/* ============================================
   ACCESSIBILITY - REDUCED MOTION
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============================================
   MOBILE OPTIMIZATIONS
   ============================================ */
@media (max-width: 767px) {
  /* Simplify shadows and effects on mobile */
  .animation-elements::before,
  .animation-elements::after {
    filter: none !important;
  }

  .weather-clear-day .animation-elements::before {
    box-shadow: 0 0 20px 8px rgba(255, 220, 99, 0.5);
  }

  .weather-clear-night .animation-elements::before {
    box-shadow: 0 0 20px 6px rgba(255, 255, 255, 0.3);
  }
}
